ORG 1000H
CONT EQU 10H
COMP EQU 11H
EOI EQU 20H
IMR EQU 21H
PB EQU 30H
PA EQU 31H
CB EQU 32H
CA EQU 33H
INT1 EQU 25H
ORG 1000H
CODIGO DB "SADSADKLXZJLZ<KXM<Z.2C"
FIN DB ?

ORG 40
IP_TIMER DW TIMER_SUBRUT

ORG 3000H
TIMER_SUBRUT: NOP
POLL: IN AL, PB 
AND AL, 00000001B
JNZ POLL
MOV AL, [BX]
OUT PA, AL
IN AL, PB
AND AL, 11111101B
OUT PB, AL

IN AL, PB
OR AL, 00000010B
OUT PB, AL
DEC CL
ADD BX, 1

MOV AL, 0
OUT CONT, AL
CMP CL, 0
JNZ FINN
CLI
MOV AL, 0FFH
OUT IMR, AL
STI
FINN: MOV AL, 20H
OUT EOI, AL
IRET

ORG 2000H
MOV AL, 0
OUT CA, AL
MOV AL, 11111101B
OUT CB, AL

MOV AL, 0
OUT PB, AL

MOV AL, 0
OUT CONT, AL
MOV AL, 1
OUT COMP, AL

MOV CL, OFFSET FIN-OFFSET CODIGO
MOV BX, OFFSET CODIGO
CLI
MOV AL, 11111101B
OUT IMR, AL

MOV AL, 10
OUT INT1, AL
STI
LOOPEAR: CMP CL, 0
JNZ LOOPEAR

INT 0
END
