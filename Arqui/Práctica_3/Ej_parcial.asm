DATO EQU 40H
ESTADO EQU 41H
EOI EQU 20H
IMR EQU 21H
INT0 EQU 24H

ORG 40
IP_INT10 DW F10SUBRUT

ORG 1000H
 MSJ DB "INGRESE UN NRO DEL 1 AL 9"
 FINMSJ DB ?
 MSJPAR DB "EL NUMERO ES PAR"
 FINPAR DB 0
 MSJIMPAR DB "EL NUMERO ES IMPAR"
 FINIMPAR DB 0
 CAR DB ?

ORG 3000H
F10SUBRUT: MOV DL, 1
MOV AL, 20
OUT EOI, AL
IRET

ORG 2000H
PEDIR: MOV BX, OFFSET MSJ
 MOV AL, OFFSET FINMSJ - OFFSET MSJ
 INT 7
 MOV BX, OFFSET CAR
 INT 6
 MOV AL, CAR
 CMP AL, 31H
 JS PEDIR
 CMP AL, 3AH
 JNS PEDIR

 MOV DL, 0
 
 CLI
 MOV AL, 11111110B
 OUT IMR, AL
 MOV AL, 10
 OUT INT0, AL
 STI
 

 LOOPEAR: CMP DL, 1
 JNZ LOOPEAR
 
 MOV CL, CAR
 SUB CL, 30H
 MOV DL, 0
 PAROIMPAR:CMP CL, 1
 JZ IMPAR
 CMP CL, 0
 JZ PAR
 SUB CL, 2
 JMP PAROIMPAR
 IMPAR: MOV DL, 1
 JMP FIN
 PAR: MOV DL, 0
 FIN:NOP

 IN AL, ESTADO
 AND AL, 01111111B
 OUT ESTADO, AL
 CMP DL, 0
 JZ ESPAR
 MOV BX, OFFSET MSJIMPAR
 JMP POLL
 ESPAR: MOV BX, OFFSET MSJPAR
 POLL: IN AL, ESTADO
 AND AL, 00000001B
 CMP AL, 0
 JNZ POLL
 IMPRIMIR: MOV AL, [BX]
 OUT DATO, AL
 INC BX
 CMP BYTE PTR [BX],0
 JNZ POLL
 INT 0
END
