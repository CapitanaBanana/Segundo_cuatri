PB EQU 31H
CB EQU 33H

EOI EQU 20H
IMR EQU 21H

INT0 EQU 24H

ORG 40
IP_F10 DW SUBRUT

ORG 3000H 
SUBRUT: MOV AL, [BX]
OUT PB, AL
INC BX
CMP BYTE PTR [BX], 0
JNZ SEGUIR
MOV BX, OFFSET LED7

SEGUIR: MOV AL, 20H
OUT EOI, AL
IRET

ORG 1000H
LED7 DB 10000000B
LED6 DB 01000000B
LED5 DB 00100000B
LED4 DB 00010000B
LED3 DB 00001000B
LED2 DB 00000100B
LED1 DB 00000010B
LED0 DB 00000001B
FIN DB 0

ORG 2000H
MOV AL, 0
OUT CB, AL
MOV BX, OFFSET LED7
CLI
MOV AL, 11111110B
OUT IMR, AL

MOV AL, 10
OUT INT0, AL
STI
LOOPEAR: JMP LOOPEAR

INT 0
END
----------------------------------------------
pedir letras mayus hasta que f10 y imprimirlos con handshake x int

EOI EQU 20H
IMR EQU 21H
INT0 EQU 24H
INT2 EQU 26H
DATO EQU 40H
ESTADO EQU 41H
ORG 40
IP_INT0 DW F10SUBRUT

ORG 44
IP_INT2 DW IMPRIMIR
ORG 1000H
MSJ DB "INGRESE LETRAS MAYUSCULAS"
FINMSJ DB ?
CAR DB ?
CADENA DB ?

ORG 3000H
F10SUBRUT:MOV DL, 1
CLI
MOV AL, 0FFH
OUT IMR, AL
STI
MOV AL, 20H
OUT EOI, AL
IRET

ORG 3500H
IMPRIMIR: MOV AL, [BX]
OUT DATO, AL
INC BX
DEC CL
JNZ FIN
CLI
MOV AL, 0FFH
OUT IMR, AL
STI


FIN: MOV AL, 20H
OUT EOI, AL
IRET


ORG 2000H
MOV BX, OFFSET MSJ
MOV AL, OFFSET FINMSJ-OFFSET MSJ
INT 7
MOV CX, 0
MOV DL, 0
CLI
MOV AL, 11111110B
OUT IMR, AL
MOV AL, 10
OUT INT0, AL

MOV AL, 11
OUT INT2, AL
STI
PEDIR: MOV BX, OFFSET CAR
INT 6
CMP CAR, 41H
JS PEDIR
CMP CAR, 5BH
JNS PEDIR
INC CX
MOV BX, OFFSET CADENA
ADD BX,CX
MOV AX, CAR
MOV WORD PTR [BX], AX
CMP DL, 0
JZ PEDIR

INC CX
MOV BX, OFFSET CADENA
IN AL, ESTADO
OR AL, 10000000B
OUT ESTADO, AL
CLI
MOV AL, 11111011B 
OUT IMR, AL
STI
IMPR: CMP CL, 0
JNZ IMPR

INT 0
END
